<div class="breadcrumbs">
    {% if page.url == "/" -%}
        <span class="current">Home</span>
        {%- if page.draft %}
            <span class="separator">&vert;</span>
            <span class="draft"><i class="fas fa-fw fa-person-digging" aria-hidden="true"></i></span>
        {%- endif -%}
    {%- else -%}
        {%- assign crumb_path = "/" -%}
        {%- assign crumbs = page.url | split: '/' -%}
        {%- for crumb in crumbs offset: 1 -%}
            {%- if forloop.first -%}
                <a href="{{ '/' | relative_url }}">Home</a>
                <span class="separator">&gt;</span>
            {% endif -%}
            {%- if forloop.last -%}
                <span class="current">
                {%- if page.api -%}
                <code>{{ page.title }}</code>
                {%- else -%}
                {{ page.title }}
                {%- endif -%}
                </span>
                {%- if page.draft %}
                    <span class="separator">&vert;</span>
                    <span class="draft"><i class="fas fa-fw fa-person-digging" aria-hidden="true"></i></span>
                {%- endif -%}
            {%- else -%}
                <a href="{{ crumb | prepend: crumb_path | relative_url }}">
                {%- if site.data.breadcrumbs.breadcrumbs[crumb] -%}
                    {%- assign crumb_api = site.data.breadcrumbs.breadcrumbs[crumb].api | default: page.api -%}
                    {%- assign crumb_title_default = crumb | replace: '-', ' ' | replace: '%20', ' ' | capitalize -%}
                    {%- assign crumb_title = site.data.breadcrumbs.breadcrumbs[crumb].title | default: crumb_title_default -%}
                    {%- if crumb_api -%}
                    <code>{{ crumb_title }}</code>
                    {%- else -%}
                    {{ crumb_title }}
                    {%- endif -%}
                {%- else -%}
                    {%- if page.api -%}
                    <code>{{ crumb }}</code>
                    {%- else -%}
                    {{ crumb | replace: '-', ' ' | replace: '%20', ' ' | capitalize }}
                    {%- endif -%}
                {%- endif -%}
                </a>
                <span class="separator">&gt;</span>
                {% assign crumb_path = crumb_path | append: crumb | append: "/" -%}
            {%- endif -%}
        {%- endfor -%}
    {%- endif %}
</div>